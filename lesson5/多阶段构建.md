Docker 镜像是分层的，并且每一层都会占用额外的存储空间，一个镜像层积越多，占用的空间就越多
镜像构建最重要的一个原则————*保持镜像体积尽可能小*

1. 基础镜像体积应该尽量小
2. 尽量减少Dockerfile行数

旧方案：借助一个额外的脚本，将镜像的编译过程和运行过程分开

多阶段构建：
在一个Dockerfile中声明多个 FORM ，选择性的将一个阶段生成的文件拷贝到另一个阶段中，从而实现*最终的镜像只保留需要的环境和文件*

1. 每个 FROM 代表一个构建阶段  使用 `as` 命名阶段
2. 在下一个阶段使用 COPY 指令拷贝上一阶段的结果到当前阶段 `COPY --from=0 source target`